<h1><b>Работа с загрузчиком</b></h1>

<h2>1. Попасть в систему без пароля несколькими способами</h2>

<h4>Способ 1. init=/bin/sh</h4>

Просто грузим систему и запускаем шелл вместо init


<h4>Способ 2. rd.break</h4>

rd.break скидывает в шелл ramdisk'а, где уже вручную монтируем в rw режиме корень и chroot'имся в него 

?не работает в центосях до 7 версии?


<h4>Способ 3. rw init=/sysroot/bin/sh</h4>

Входим в emergency mode, в котором запускается сервис switch root, который chroot'ит в /sysroot

<i>*все эти параметры дописываем в файл /boot/grub2/grub.cfg, в строку начинающуюся с linux16</i>


<h2>2. Установить систему с LVM, после чего переименовать VG</h2>

    2.1 Находим имя volume group с помощью vgs

    2.2 Переименовываем в OtusRoot

    2.3 sed'ом меняем старое имя на новое в трех конфигурационных файлах

        - /etc/fstab

        - /etc/default/grub

        - /boot/grub2/grub.cfg

        проверяем корректность

    2.4 Пеерезагружаемся

    2.5 Успешно загружаемся и видим в vgs, что всё ок

<h2>3. Добавить модуль в initrd</h2>

    </code>3.1 Создаем директорию для нашего модуля dracut

    3.2 Кладём в неё:

        - скрипт установки модуля

        - нагрузочный скрипт (пришлось переписать)

    3.3 Пересоздаем образ initrd с помощью mkinitrd

    3.4 Отключаем в grub ключи rhgb и quiet, ребутимся

    3.5 При загрузке, либо в дальнейшем в dmesg <a href="https://github.com/aytugana/my-otus-edu/blob/master/lesson-08/tux.png">видим</a> пингвина

    3.6 Радуемся, пишем отчёт, сдаём домашку

Последовательность действий записана в файле typescript